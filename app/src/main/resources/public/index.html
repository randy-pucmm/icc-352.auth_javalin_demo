<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Home</title>
    <link rel="stylesheet" href="/global.css" />
  </head>
  <body>
    <div class="card">
      <h1 id="welcome">Bienvenido</h1>
      <p>Has iniciado sesión correctamente.</p>

      <a class="btn" href="/logout">Cerrar sesión</a>
    </div>
  </body>
</html>

<script>
  fetch("http://localhost:7000/api/me")
    .then((res) => {
      if (!res.ok) throw new Error("El usuario no se pudo validar");
      return res.json();
    })
    .then((data) => {
      document.getElementById("welcome").textContent =
        `Bienvenido, ${data.username}!`;
    })
    .catch((e) => {
      console.error(e);
    });
</script>
